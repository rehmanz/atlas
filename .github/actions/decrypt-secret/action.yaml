name: 'Decrypt secret file'
description: 'Decrypt git secret file into an environment variables or to a file'

inputs:
  gpg-private-key:
    description: 'The GPG private key'
    required: true

  secret-file:
    description: 'The secret file holding environment variables'
    required: true

  output-file:
    description: 'The file path for outputting the secret content'
    required: false
    default: "dont-output"

runs:
  using: "composite"
  steps:
    - shell: bash
      run: |
        if [[ ! -e ./private_key.gpg ]]
        then
          echo "secret-file=${{ inputs.secret-file }}"
          echo "gpg-private-key=${{ inputs.gpg-private-key }}"
          echo "foo" | base64 -d
        fi
