name: 'Decrypt secret file'
description: 'Decrypt git secret file into an environment variables or to a file'

inputs:
  gpg-private-key:
    description: 'The GPG private key'
    required: true

  secret-file:
    description: 'The secret file holding environment variables'
    required: true

  output-file:
    description: 'The file path for outputting the secret content'
    required: false
    default: "dont-output"

runs:
  using: "composite"
  steps:
    - shell: bash
      run: |
        set -o pipefail
        echo "gpg-private-key=${{ inputs.gpg-private-key }}"
        echo "secret-file=${{ inputs.secret-file }}"
        which base64

        echo ${{ inputs.gpg-private-key }} > test.key
